# 涂装部内场跨间智能排产方案

## 问题描述
分段按日期批次送入多个跨间，每个分段需要在同一跨间依次完成两道工序：冲砂与涂漆。冲砂阶段要考虑到分段是否到达跨间、总冲砂量是否超过跨间单日工作能力以及各跨间的冲砂量是否均衡；涂漆阶段不仅需要考虑上面三个约束，还需要根据分段的类型来多次涂漆，而涂漆后的冷却时间也要纳入方案考虑。

上面是理想的生产状况，但在实际中前置工序往往会提前加工并将分段送入跨间，因此在分配跨间每日任务时要把预计明日送入的分段也纳入考虑。

在综合考虑后本项目将优化目标定为以下两点：总完工时间最小化和每日工作总量最适宜。

## 项目方案
传统方式排产依托于管理人员的经验，具有较强主观性，且算力相对有限，难以实现全局最优的资源调配，因此，引入**新型智能排产方案**已成为必然趋势，而目前的主流方法有**启发式算法，强化学习**等等。

![1](/imgs/1.png)

## 加工路线
![2](/imgs/2.png)

## 技术路线
![3](/imgs/3.png)
本项目技术路线包括四个主要步骤：
1、采集数据，进行预处理，确保数据的规范性
2、构建多目标优化数学模型，采用启发式算法求解生成作业计划
3、通过小程序将调度计划可视化，展示任务安排、资源使用等信息
4、利用移动端评估实施效果，形成闭环优化机制。

## 调度方案

### 贪婪迭代
贪婪迭代算法结构清晰且异常高效，可以在很快的时间内得到较优解。

**Greedy_Algorithm** 可分为两部分：第一部分将分段的待涂漆总量降序排列后依次分发给5个跨间，在确保每个跨间工作量大致相同的同时尽可能接近跨间工作能力上限；第二部分将首日已冲砂分段分配给10个小班组后，统一每个跨间的剩余日期总分段，再均匀的分配给10个小班组。

经过测试，在生成一个生产周期规模的分段的调度方案时，从开始生成到生成结束不会超过3秒。


### PPO算法
PPO算法可以通过设置不同的惩罚系数来调整调度方案的侧重点。

**PPO_Algorithm** 中有三个惩罚项：每日跨间未利用率、分段延迟天数以及跨间每日工作量差异，通过调整这三个惩罚项的前置系数，可以让智能体在训练中学得不同风格的策略网络。

经过测试，一个生产周期的规模量可在训练模型五十万次以内收敛到稳定区域，并且模型在训练好以后便可直接投入使用，快速生成排产方案。

## 成果展示
### 体量分析
![4](/imgs/4.png)
### 耗时分析
![5](/imgs/5.png)
